!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.W=t()}(this,function(){function e(){return"orientation"in window?window.orientation?"landscape":"portrait":html.clientWidth>html.clientHeight?"landscape":"portrait"}function t(t){var n,i,o,r,h=[{width:screen.availWidth,height:screen.availHeight},{width:window.outerWidth,height:window.outerHeight},{width:window.innerWidth,height:window.innerHeight}];if(/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&"landscape"==e()?(n=screen.height,i=screen.width,h[2].width=n):(n=screen.width,i=screen.height),t)return{width:n,height:i};for(o=0,r=h.length;r>o;++o)h[o].width>n||h[o].height>i||!h[o].width||!h[o].height?h[o].note=0:h[o].note=n-h[o].width+(i-h[o].height);return h.sort(function(e,t){return t.note-e.note}),{width:h[0].width,height:h[0].height}}var n,i,o=[],r=!1,h=16;return window.addEventListener?"onorientationchange"in window?window.addEventListener("orientationchange",function(){r=!0},!1):window.addEventListener("resize",function(){r=!0},!1):window.attachEvent("onresize",function(){r=!0}),n=document.createElement("p"),n.style.position="absolute",n.style.textIndent="100%",n.style.whiteSpace="nowrap",n.style.overflow="hidden",n.style.color="transparent",n.innerHTML="W",document.body.children.length?document.body.insertBefore(n,document.body.children[0]):document.body.appendChild(n),node.insertBefore(this.node,this.children()[0].node),i=n.offsetWidth,setInterval(function(){var e=n.offsetWidth;if(e!=i&&(r=!0),r&&html.clientWidth){h=i/e*h,i=e;for(var t=0,d=o.length;d>t;++t)o[t].func();r=!1}},10),{px2em:function(e){return e/h},getViewportWidth:function(e){return t(e).width},getViewportHeight:function(e){return t(e).height},getOrientation:function(){return e()},addListener:function(e,t){return o.push({func:e,key:t}),e},removeListener:function(e){for(var t=0,n=o.length;n>t;++t)if(o[t].key==e){o.splice(t,1);break}}}});