!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.W=e()}(this,function(){function t(){return"orientation"in window?window.orientation?"landscape":"portrait":r.clientWidth>r.clientHeight?"landscape":"portrait"}function e(e){var n,i,o,r,h=[{width:screen.availWidth,height:screen.availHeight},{width:window.outerWidth,height:window.outerHeight},{width:window.innerWidth,height:window.innerHeight}];if(/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&"landscape"==t()?(n=screen.height,i=screen.width,h[2].width=n):(n=screen.width,i=screen.height),e)return{width:n,height:i};for(o=0,r=h.length;r>o;++o)h[o].width>n||h[o].height>i||!h[o].width||!h[o].height?h[o].note=0:h[o].note=n-h[o].width+(i-h[o].height);return h.sort(function(t,e){return e.note-t.note}),{width:h[0].width,height:h[0].height}}var n,i,o,r=document.documentElement,h=[],d=!1,a=16;return window.addEventListener?"onorientationchange"in window?window.addEventListener("orientationchange",function(){d=!0},!1):window.addEventListener("resize",function(){d=!0},!1):window.attachEvent("onresize",function(){d=!0}),i=document.createElement("p"),i.style.position="absolute",i.style.textIndent="100%",i.style.whiteSpace="nowrap",i.style.overflow="hidden",i.style.color="transparent",i.innerHTML="W",r.appendChild(i),o=i.offsetWidth,setInterval(function(){if(n=i.offsetWidth,n!=o&&(d=!0),d&&r.clientWidth){a=o/n*a,o=n;for(var t=0,e=h.length;e>t;++t)h[t].func();d=!1}},10),{px2em:function(t){return t/a},getViewportWidth:function(t){return e(t).width},getViewportHeight:function(t){return e(t).height},getOrientation:function(){return t()},addListener:function(t,e){return h.push({func:t,key:e}),t},removeListener:function(t){for(var e=0,n=h.length;n>e;++e)if(h[e].key==t){h.splice(e,1);break}}}});